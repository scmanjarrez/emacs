/*
 * This is sample code generated by rpcgen.
 * These are only templates and you can use them
 * as a guideline for developing your own functions.
 */

#include "servicio.h"


void
ruidsgid_servicio_1(char *host, char *gname)
{
  CLIENT *clnt;
  respuesta_gid_luids  *result_1;

#ifndef	DEBUG
  clnt = clnt_create (host, RUIDSGID_SERVICIO, RUIDSGID_VERSION, "udp");
  if (clnt == NULL) {
    clnt_pcreateerror (host);
    exit (1);
  }
#endif	/* DEBUG */

  result_1 = obtener_ugids_1(&gname, clnt);
  if (result_1 == (respuesta_gid_luids *) NULL)
    {
      clnt_perror (clnt, "call failed");
    }
  else
    {
      if(result_1->gid == -1)
	{
	  printf("El grupo %s no existe.\n", gname);
	  printf("Valores devueltos por servidor:\n");
	  printf("GID:%d\n", result_1->gid);
	  printf("Lista miembros: \n");
	}
      else
	{
	  printf("El grupo %s:%d tiene %d miembros:\n",
		 gname, result_1->gid, result_1->uids.uids_len);
	  int i;
	  for(i=0; i<result_1->uids.uids_len;i++)
	    {
	      printf("%d\n",result_1->uids.uids_val[i]);
	    }
	}
    }
  
#ifndef	DEBUG
  clnt_destroy (clnt);
#endif	 /* DEBUG */
}


int
main (int argc, char *argv[])
{
  char *host, *gname;

  if (argc < 3) {
    printf ("usage: %s server_host group_name [group_name...]\n",
	    argv[0]);
    exit (1);
  }
  host = argv[1];
  int i;
  for(i=0; i<argc-2;i++)
    {
      gname = argv[i+2];
      ruidsgid_servicio_1 (host, gname);
    }
  return 0;
}
